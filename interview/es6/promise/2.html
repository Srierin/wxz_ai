<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>手写Promise.all</title>
</head>
<body>
   <script>
    Promise.MyAll =  function(promises){
      let arr = []; // 结果数组
      let count = 0; // 计数器
      return new Promise((resolve,reject)=>{
        // resolve->all promsies 所有都resolve 才能调用
        // 如果promises[i] 不是promise怎么办？Promise.resolve(promises[i])
        promises.forEach((item,i)=>{
          // 保证如果里面不是promise ，会被转化成promise
          Promise.resolve(item)
               .then(res=>{
                arr[i] = res
                count++
                if(count === promises.length) resolve(arr)
               })
              .catch(reject) 
        })
      })
    }
   </script>
</body>
</html>